#!/bin/bash -e

NO_COLOR='\e[0m'
GREEN='\e[0;32m'

brew="brew update --verbose && brew cleanup --verbose"
cask="brew update --verbose && brew cask list | xargs brew cask install --verbose"
gem="gem update --user-install -V && gem cleanup -V"
pip="pip install --user --upgrade pip && pip freeze --local | grep -v '^\-e' | cut -d = -f 1  | xargs pip install --user -U"
macosx="softwareupdate -i -a --verbose"
npm="npm update --verbose"
aptget="sudo apt-get update && sudo apt-get -y upgrade"

if hash brew 2>/dev/null
then
  printf "${GREEN}## Update Brew and Brew packages${NO_COLOR}\n"
  bash -c "$brew"
  printf "${GREEN}## Update Brew and Brew Cask packages${NO_COLOR}\n"
  bash -c "$cask"
fi

if hash npm 2>/dev/null
then
  printf "\n${GREEN}## Update NPM packages${NO_COLOR}\n"
  bash -c "$npm"
fi

if hash ruby 2>/dev/null
then
  printf "\n${GREEN}## Update Ruby gems${NO_COLOR}\n"
  bash -c "$gem"
fi

if hash pip 2>/dev/null
then
  printf "\n${GREEN}## Update PIP packages${NO_COLOR}\n"
  bash -c "$pip"
fi

if [[ "$OSTYPE" == "darwin"*  ]]
then
  printf "\n${GREEN}## Update MacOSX${NO_COLOR}\n"
  sudo bash -c "$macosx"
fi

if hash apt-get 2>/dev/null
then
  printf "\n${GREEN}## Update apt-get packages${NO_COLOR}\n"
  bash -c "$aptget"
fi
